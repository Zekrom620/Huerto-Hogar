<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HuertoHogar - Frescura Directa del Campo</title>
    <meta name="description" content="HuertoHogar es una tienda online dedicada a llevar la frescura y calidad de los productos del campo directamente a tu puerta en Chile.">

    <link rel="stylesheet" href="css/estilo.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Playfair+Display:wght@700&display=swap"
        rel="stylesheet"> 
</head>

<body>

    <header>
        <div class="top-bar">
            <div>
                <img src="img/Logo.png" alt="Logo HuertoHogar" width="40"> 
                <span>HuertoHogar</span>
            </div>
            <nav>
                <a href="index.html" class="activo">Home</a>
                <a href="productos.html">Productos</a>
                <a href="nosotros.html">Nosotros</a>
                <a href="blogs.html">Blog & Tips</a> <a href="contacto.html">Contacto</a>
            </nav>
            <div class="acciones">
                <a href="login.html">Iniciar sesión</a> |
                <a href="registro.html">Registrar usuario</a> |
                <a href="carrito.html" class="carrito">Carrito 0</a>
            </div>
        </div>
    </header>

    <main>
        <section>
            <h2>¡Descubre la frescura del campo con HuertoHogar!</h2>
            <p>Conéctate con la naturaleza y lleva lo mejor de frutas, verduras y productos orgánicos frescos
                directamente a tu mesa. Con más de 6 años de experiencia, garantizamos calidad del campo a tu hogar.
                ¡Únete a un estilo de vida saludable y sostenible!</p>
        </section>

        <section>
            <h2>Nuestra Cosecha Recomendada de la Semana</h2>
            <div class="recomendaciones catalogo">
                </div>
        </section>
    </main>

    <footer>
        <p>HuertoHogar • Frescura y Calidad Directa del Campo • Chile</p>
    </footer>

    <script src="js/script.js"></script>
    <script>
        function getRandomProducts(array, cantidad = 8) {
            // Función para obtener productos aleatorios (Se asume que PRODUCTOS se define en script.js)
            const copia = [...array];
            const seleccion = [];
            for (let i = 0; i < cantidad && copia.length; i++) {
                const idx = Math.floor(Math.random() * copia.length);
                seleccion.push(copia[idx]);
                copia.splice(idx, 1);
            }
            return seleccion;
        }

        function renderRecomendaciones() {
            const contenedor = document.querySelector('.recomendaciones');
            // IMPORTANTE: Asegúrate de que la variable global 'PRODUCTOS' exista y sea visible aquí.
            // Si el array PRODUCTOS se define en script.js, esto funcionará después de cargarlo.
            if (!contenedor || typeof PRODUCTOS === 'undefined') {
                console.error('El contenedor de recomendaciones o el array PRODUCTOS no se encontró.');
                return;
            }

            contenedor.innerHTML = '';
            // Se seleccionarán los productos del nuevo array PRODUCTOS de HuertoHogar.
            const productos = getRandomProducts(PRODUCTOS, 8); 
            productos.forEach(p => {
                const div = document.createElement('div');
                div.className = 'producto-item card';
                div.innerHTML = `
                    <img src="${p.imagen}" alt="${p.nombre}" loading="lazy">
                    <p>${p.nombre}</p>
                    <p class="badge">${p.origen || 'Origen Local'}</p>
                    <p>${formatCLP(p.precio)}</p>
                    <div class="prod-buttons">
                        <button class="btn-agregar" data-id="${p.id}">Añadir al carrito</button>
                        <button class="btn-ver-detalle" data-id="${p.id}">Ver Producto</button>
                    </div>
                `;
                contenedor.appendChild(div);
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Se llama a la función de renderizado una vez que el DOM esté cargado.
            renderRecomendaciones(); 
        });
    </script>
</body>

</html>